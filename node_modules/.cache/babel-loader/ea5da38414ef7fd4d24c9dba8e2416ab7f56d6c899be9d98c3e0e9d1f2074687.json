{"ast":null,"code":"import React,{useState,useEffect}from'react';import axios from'axios';import'./GestioneRecensioni.css';import Notification from'../components/Notification';// Importiamo il componente Notification\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function GestioneRecensioni(){const isHost=localStorage.getItem('isHost');// Se l'utente non è autenticato, lo reindirizziamo alla pagina di login\nif(!isHost){window.location.href='/host-login';// Reindirizza alla pagina di login\n}const[recensioniInAttesa,setRecensioniInAttesa]=useState([]);const[error,setError]=useState(null);const[notification,setNotification]=useState({message:'',type:''});useEffect(()=>{axios.get('http://localhost:5000/api/recensioni-pending').then(response=>setRecensioniInAttesa(response.data)).catch(error=>setError('Errore nel recupero delle recensioni in attesa'));},[]);const gestisciRecensione=(id,stato)=>{const approvato=stato==='approva';// Invia la richiesta per approvare o rifiutare\naxios.post('http://localhost:5000/api/gestisci-recensione',{id,approvato}).then(response=>{if(approvato){// Notifica di approvazione\nsetNotification({message:'Recensione approvata con successo',type:'success'});}else{// Notifica di rifiuto\nsetNotification({message:'Recensione rifiutata con successo',type:'success'});}// Rimuoviamo la recensione dalla lista in attesa\nsetRecensioniInAttesa(prevRecensioni=>prevRecensioni.filter(rec=>rec.id!==id));}).catch(error=>{console.error('Errore nella gestione della recensione',error);setNotification({message:'Errore nel processare la recensione',type:'error'});});};return/*#__PURE__*/_jsxs(\"div\",{className:\"gestione-recensioni\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Gestione Recensioni\"}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"error\",children:error}),/*#__PURE__*/_jsx(Notification,{message:notification.message,type:notification.type,onClose:()=>setNotification({message:'',type:''})}),/*#__PURE__*/_jsxs(\"ul\",{children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Recensioni in Attesa:\"}),recensioniInAttesa.length===0?/*#__PURE__*/_jsx(\"p\",{children:\"Nessuna recensione in attesa\"}):recensioniInAttesa.map(recensione=>/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Nome Utente:\"}),\" \",recensione.nome_cliente]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Recensione:\"}),\" \",recensione.recensione]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Rating:\"}),\" \",recensione.valutazione]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>gestisciRecensione(recensione.id,'approva'),children:\"Approva\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>gestisciRecensione(recensione.id,'rifiuta'),children:\"Rifiuta\"})]},recensione.id))]})]});}export default GestioneRecensioni;","map":{"version":3,"names":["React","useState","useEffect","axios","Notification","jsx","_jsx","jsxs","_jsxs","GestioneRecensioni","isHost","localStorage","getItem","window","location","href","recensioniInAttesa","setRecensioniInAttesa","error","setError","notification","setNotification","message","type","get","then","response","data","catch","gestisciRecensione","id","stato","approvato","post","prevRecensioni","filter","rec","console","className","children","onClose","length","map","recensione","nome_cliente","valutazione","onClick"],"sources":["C:/Users/tnigh/Desktop/MAMMA/beauty-armony-academy/src/pages/GestioneRecensioni.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport './GestioneRecensioni.css';\r\nimport Notification from '../components/Notification'; // Importiamo il componente Notification\r\n\r\nfunction GestioneRecensioni() {\r\n  const isHost = localStorage.getItem('isHost');\r\n\r\n  // Se l'utente non è autenticato, lo reindirizziamo alla pagina di login\r\n  if (!isHost) {\r\n    window.location.href = '/host-login'; // Reindirizza alla pagina di login\r\n  }\r\n\r\n  const [recensioniInAttesa, setRecensioniInAttesa] = useState([]);\r\n  const [error, setError] = useState(null);\r\n  const [notification, setNotification] = useState({\r\n    message: '',\r\n    type: '',\r\n  });\r\n\r\n  useEffect(() => {\r\n    axios\r\n      .get('http://localhost:5000/api/recensioni-pending')\r\n      .then((response) => setRecensioniInAttesa(response.data))\r\n      .catch((error) => setError('Errore nel recupero delle recensioni in attesa'));\r\n  }, []);\r\n\r\n  const gestisciRecensione = (id, stato) => {\r\n    const approvato = stato === 'approva';\r\n\r\n    // Invia la richiesta per approvare o rifiutare\r\n    axios\r\n      .post('http://localhost:5000/api/gestisci-recensione', { id, approvato })\r\n      .then((response) => {\r\n        if (approvato) {\r\n          // Notifica di approvazione\r\n          setNotification({\r\n            message: 'Recensione approvata con successo',\r\n            type: 'success',\r\n          });\r\n        } else {\r\n          // Notifica di rifiuto\r\n          setNotification({\r\n            message: 'Recensione rifiutata con successo',\r\n            type: 'success',\r\n          });\r\n        }\r\n        // Rimuoviamo la recensione dalla lista in attesa\r\n        setRecensioniInAttesa((prevRecensioni) =>\r\n          prevRecensioni.filter((rec) => rec.id !== id)\r\n        );\r\n      })\r\n      .catch((error) => {\r\n        console.error('Errore nella gestione della recensione', error);\r\n        setNotification({\r\n          message: 'Errore nel processare la recensione',\r\n          type: 'error',\r\n        });\r\n      });\r\n  };\r\n\r\n  return (\r\n    <div className=\"gestione-recensioni\">\r\n      <h2>Gestione Recensioni</h2>\r\n      {error && <div className=\"error\">{error}</div>}\r\n\r\n      {/* Aggiungi il componente Notification */}\r\n      <Notification\r\n        message={notification.message}\r\n        type={notification.type}\r\n        onClose={() => setNotification({ message: '', type: '' })}\r\n      />\r\n\r\n      <ul>\r\n        <h3>Recensioni in Attesa:</h3>\r\n        {recensioniInAttesa.length === 0 ? (\r\n          <p>Nessuna recensione in attesa</p>\r\n        ) : (\r\n          recensioniInAttesa.map((recensione) => (\r\n            <li key={recensione.id}>\r\n              <p><strong>Nome Utente:</strong> {recensione.nome_cliente}</p>\r\n              <p><strong>Recensione:</strong> {recensione.recensione}</p>\r\n              <p><strong>Rating:</strong> {recensione.valutazione}</p>\r\n              <button onClick={() => gestisciRecensione(recensione.id, 'approva')}>Approva</button>\r\n              <button onClick={() => gestisciRecensione(recensione.id, 'rifiuta')}>Rifiuta</button>\r\n            </li>\r\n          ))\r\n        )}\r\n      </ul>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default GestioneRecensioni;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}